(this["webpackJsonpauth-project"]=this["webpackJsonpauth-project"]||[]).push([[0],{36:function(e,t,n){e.exports={form:"AuthForm_form__uKz43","radio-inputs":"AuthForm_radio-inputs__3MzsI",message:"AuthForm_message__2_XZJ"}},37:function(e,t,n){e.exports={list:"OrdersList_list___c_k_",message:"OrdersList_message__2k_S3",card:"OrdersList_card__3Op2h"}},38:function(e,t,n){e.exports={card:"Order_card__1IM2Z",total:"Order_total__3dJzj",disabled:"Order_disabled__1T4Y3"}},39:function(e,t,n){e.exports={"back-btn":"NewOrder_back-btn__2nkIV","time-btns":"NewOrder_time-btns__38Cni",main:"NewOrder_main__2kt26",card:"NewOrder_card__2voUG"}},46:function(e,t,n){e.exports={order:"OrdersListItem_order__1yBBO",items:"OrdersListItem_items__25qTg"}},49:function(e,t,n){e.exports={"available-items":"Menu_available-items__2s_Om",card:"Menu_card__21r1j"}},50:function(e,t,n){e.exports={card:"DiningHall_card__2OI8l",container:"DiningHall_container__3HgOU"}},54:function(e,t,n){e.exports={card:"Card_card__1pi33"}},56:function(e,t,n){e.exports={item:"OrderItem_item__1cYN_"}},57:function(e,t,n){e.exports={card:"Kitchen_card__1IQD_"}},63:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var c=n(7),i=n(40),r=n.n(i),a=(n(63),n(12)),s=n(27),d=n(28),o=n(11),l=n(21),j=n(16),b=n(32),u=Object(b.b)({name:"auth",initialState:Object(j.a)({},{isLoggedIn:!1,area:""}),reducers:{login:function(e,t){e.isLoggedIn=!0,e.area=t.payload,localStorage.setItem("area",t.payload)},logout:function(e){e.isLoggedIn=!1,e.area="",localStorage.removeItem("area")}}}),m=u.actions,h=u,O=n(36),f=n.n(O),x=n(6),p=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(""),a=Object(o.a)(r,2),s=a[0],j=a[1],b=Object(l.b)(),u=Object(c.useRef)(),h=Object(c.useRef)(),O=function(e){j(e.target.value)},p=n?"current-password":"new-password";return Object(x.jsxs)("div",{className:f.a.form,children:[Object(x.jsx)("h1",{className:f.a.title,children:n?"Login":"Sign Up"}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=u.current.value,c=h.current.value,r=Object(d.b)();if(n){if(""===s)return void alert("select an area");Object(d.d)(r,t,c).then((function(){b(m.login(s))})).catch((function(e){return alert(e.code)}))}else Object(d.a)(r,t,c).then((function(){i(!0),alert("You have successfully registered, please select an area to login")})).catch((function(e){return alert(e.code)}))},children:[Object(x.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(x.jsx)("input",{ref:u,type:"text",id:"email",autoComplete:"email"}),Object(x.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(x.jsx)("input",{ref:h,type:"password",id:"password",autoComplete:p}),!n&&Object(x.jsx)("span",{className:f.a.message,children:"(6 characters or more)"}),n&&Object(x.jsxs)("div",{className:f.a["radio-inputs"],children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"dining_hall",children:"dining hall"}),Object(x.jsx)("input",{type:"radio",name:"area",value:"dining_hall",id:"dining_hall",onClick:O})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"dining_hall",children:"kitchen"}),Object(x.jsx)("input",{onClick:O,type:"radio",name:"area",value:"kitchen",id:"kitchen"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"dining_hall",children:"observer"}),Object(x.jsx)("input",{onClick:O,type:"radio",name:"area",value:"observer",id:"observer"})]})]}),Object(x.jsx)("button",{type:"submit",children:n?"Log in":"Create account"}),Object(x.jsx)("span",{type:"button",onClick:function(){i((function(e){return!e}))},children:n?"create new account":"Log in with existing account"})]})]})},_=n(19),g=n(26),v=n(53),N=Object(v.a)({apiKey:"AIzaSyB1fAWQMFyz9rVjG-WO0ke9Q22zGhQ_EtY",authDomain:"auth-project-26cd4.firebaseapp.com",projectId:"auth-project-26cd4",storageBucket:"auth-project-26cd4.appspot.com",messagingSenderId:"226057208488",appId:"1:226057208488:web:ab864a1f6821ecb81af89d"}),k=Object(g.e)(N),y=n(54),I=n.n(y),S=function(e){return Object(x.jsx)("div",{className:"".concat(I.a.card," ").concat(e.className),children:e.children})},w=n(37),C=n.n(w),F=function(e,t){return Object(g.a)(Object(g.b)(k,e),t)},L=function(e,t){Object(g.c)(Object(g.d)(k,e,t))},q=n(46),D=n.n(q),P=function(e){var t=e.data,n=e.isFinished,c=e.delivering,i=t.items,r=new Date(t.timestamp).toLocaleTimeString(),a=t.totalPrice.toFixed(2),s=0;return i.forEach((function(e){return s+=e.quantity})),Object(x.jsxs)("li",{className:D.a.order,children:[Object(x.jsxs)("span",{children:[r," - S/ ",a," - (",s,")"]}),Object(x.jsx)("ul",{className:D.a.items,children:i.map((function(e,t){return Object(x.jsxs)("li",{children:[Object(x.jsx)("span",{children:e.item})," x",e.quantity]},"".concat(e.id,"_").concat(t))}))}),!n&&Object(x.jsx)("button",{onClick:function(){F("finished-orders",t),L("orders",t.key)},children:"Order ready"}),c&&Object(x.jsx)("button",{onClick:function(){L("finished-orders",t.key)},children:"Delivered!"})]})},A=function(e){var t=e.collectionName,n=Object(c.useState)([]),i=Object(o.a)(n,2),r=i[0],s=i[1],d=Object(a.g)();if(Object(c.useEffect)((function(){var e=Object(g.g)(Object(g.b)(k,t));return Object(g.f)(e,(function(e){var t=[];e.forEach((function(e){var n=e.data(),c=e._key.path.segments[6];t.push(Object(j.a)(Object(j.a)({},n),{},{key:c}))})),0!==t.length?s(t):s(null)}),(function(e){alert(e.message),d.replace("/auth")}))}),[t,d]),!r)return Object(x.jsx)(S,{className:C.a.card,children:Object(x.jsx)("p",{children:"orders"===t?"No pending orders for now":"No finished orders"})});if(0===r.length)return Object(x.jsx)(S,{className:C.a.card,children:Object(x.jsx)("p",{children:"Loading..."})});var l=Object(_.a)(r).sort((function(e,t){return e.timestamp-t.timestamp})),b="finished-orders"===t,u="/dining-hall"===d.location.pathname;return Object(x.jsxs)(S,{className:C.a.card,children:[Object(x.jsx)("h2",{children:b?"Finished orders":"Pending orders"}),Object(x.jsx)("ol",{className:C.a.list,children:l.map((function(e,t){return Object(x.jsx)(P,{data:e,isFinished:b,delivering:u},"".concat(t,"_listItem"))}))})]})},E=Object(b.b)({name:"order",initialState:{items:[],totalPrice:0},reducers:{addItem:function(e,t){var n=t.payload,c=e.items.find((function(e){return e.id===n.id}));e.totalPrice+=n.price*n.quantity,c?c.quantity+=n.quantity:e.items.push(n)},removeItem:function(e,t){var n=t.payload,c=e.items.find((function(e){return e.id===n}));e.totalPrice-=c.price,1===c.quantity?e.items=e.items.filter((function(e){return e.id!==n})):c.quantity-=1},deleItem:function(e,t){var n=t.payload,c=e.items.find((function(e){return e.id===n}));e.totalPrice-=c.price*c.quantity,e.items=e.items.filter((function(e){return e.id!==n}))},resetOrder:function(e){e.items=[],e.totalPrice=0}}}),M=E.actions,z=E,T=function(e){var t=e.item,n=Object(l.b)();return Object(x.jsxs)("li",{onClick:function(){n(M.addItem(Object(j.a)(Object(j.a)({},t),{},{quantity:1})))},id:t.id,children:[Object(x.jsxs)("span",{children:[t.item," "]}),Object(x.jsxs)("span",{children:["S/ ",t.price.toFixed(2)]})]})},B=n(49),H=n.n(B),J=function(e){return Object(x.jsx)(S,{className:H.a.card,children:Object(x.jsx)("ul",{className:H.a["available-items"],children:e.currentMenu.map((function(e){return Object(x.jsx)(T,{item:e},e.id)}))})})},K=n(56),Q=n.n(K),W=function(e){var t=Object(l.b)(),n=e.itemInfo,c=n.item,i=n.price,r=n.quantity,a=n.id,s=i*r;return Object(x.jsxs)("li",{className:Q.a.item,children:[Object(x.jsx)("h3",{children:c}),Object(x.jsxs)("span",{children:["S/ ",i.toFixed(2)]}),Object(x.jsxs)("span",{children:["x",r]}),Object(x.jsx)("button",{onClick:function(){t(M.addItem(Object(j.a)(Object(j.a)({},e.itemInfo),{},{quantity:1})))},children:"+"}),Object(x.jsx)("button",{onClick:function(){t(M.removeItem(a))},children:"-"}),Object(x.jsx)("button",{onClick:function(){t(M.deleItem(a))},children:"del"}),Object(x.jsxs)("span",{children:["S/ ",s.toFixed(2)]})]})},Y=n(38),G=n.n(Y),R=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(l.c)((function(e){return e.order})),a=Object(l.b)();return 0===r.items.length?Object(x.jsx)(S,{className:G.a.card,children:Object(x.jsx)("p",{children:"No items added to order"})}):Object(x.jsxs)(S,{className:G.a.card,children:[Object(x.jsx)("ul",{children:r.items.map((function(e){return Object(x.jsx)(W,{id:e.id,itemInfo:e},"order_".concat(e.id))}))}),Object(x.jsxs)("div",{className:G.a.total,children:[Object(x.jsxs)("h3",{children:["Total: S/ ",r.totalPrice.toFixed(2)]}),n&&Object(x.jsx)("span",{children:"Sending... "}),Object(x.jsx)("button",{className:n?G.a.disabled:"",onClick:function(){if(0!==r.items.length){var e=(new Date).getTime();i(!0),F("orders",Object(j.a)(Object(j.a)({},r),{},{timestamp:e})).then((function(){i(!1),a(M.resetOrder())}))}},disabled:n,children:"Send order"})]})]})},U=n(39),V=n.n(U),Z=[{item:"American coffee",price:5,id:"item_m_01"},{item:"Coffee with milk",price:7,id:"item_m_02"},{item:"Cheese and ham sandwich",price:10,id:"item_m_03"},{item:"Fruits juice",price:7,id:"item_m_04"}],X=[{item:"Simple hamburger",price:10,id:"item_a_01"},{item:"Double hamburger",price:15,id:"item_a_02"},{item:"Potato chips",price:5,id:"item_a_03"},{item:"Onion rings",price:5,id:"item_a_04"},{item:"Water 500ml",price:5,id:"item_a_05"},{item:"Water 750ml",price:7,id:"item_a_06"},{item:"Soda 500ml",price:7,id:"item_a_07"},{item:"Soda 750ml",price:10,id:"item_a_08"}],$=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],i=t[1],r=n?Z:X;return Object(x.jsxs)(c.Fragment,{children:[Object(x.jsx)(s.b,{to:"/dining-hall",className:V.a["back-btn"],children:"<"}),Object(x.jsxs)("div",{className:V.a["time-btns"],children:[Object(x.jsx)("button",{onClick:function(){return i(!0)},children:"Morning"}),Object(x.jsx)("button",{onClick:function(){return i(!1)},children:"Afternoon"})]}),Object(x.jsxs)("main",{className:V.a.main,children:[Object(x.jsx)(J,{currentMenu:r}),Object(x.jsx)(R,{className:V.a.order})]})]})},ee=n(50),te=n.n(ee),ne=function(){return Object(x.jsxs)(c.Fragment,{children:[Object(x.jsx)(a.b,{path:"/dining-hall",exact:!0,children:Object(x.jsxs)("div",{className:te.a.container,children:[Object(x.jsx)(S,{className:te.a.card,children:Object(x.jsx)(s.b,{to:"/dining-hall/new-order",children:Object(x.jsx)("h2",{children:"---- Take a new order! ----"})})}),Object(x.jsx)(A,{collectionName:"finished-orders"})]})}),Object(x.jsx)(a.b,{path:"/dining-hall/new-order",exact:!0,children:Object(x.jsx)($,{})})]})},ce=n(57),ie=n.n(ce),re=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(x.jsxs)(c.Fragment,{children:[Object(x.jsx)(A,{collectionName:"orders"}),Object(x.jsx)(S,{className:ie.a.card,children:Object(x.jsx)("button",{onClick:function(){i((function(e){return!e}))},children:n?"Hide finished orders":"Show finished orders"})}),n&&Object(x.jsx)(A,{collectionName:"finished-orders"})]})},ae=!0;var se=function(){var e=Object(l.c)((function(e){return e.auth})),t=e.isLoggedIn,n=e.area,i=Object(l.b)(),r=Object(a.g)(),o=Object(d.b)();return Object(c.useEffect)((function(){var e=localStorage.getItem("area");Object(d.c)(o,(function(t){t&&e&&i(m.login(e))}))}),[i,o]),Object(c.useEffect)((function(){ae?ae=!1:t?r.push("kitchen"===n?"/kitchen":"/dining-hall"):r.push("/auth")}),[t,n,r]),Object(x.jsxs)(c.Fragment,{children:["observer"===n&&Object(x.jsxs)("nav",{className:"nav",children:[Object(x.jsx)(s.b,{to:"/dining-hall",className:"btn",children:"Dining hall"}),Object(x.jsx)(s.b,{to:"/kitchen",className:"btn",children:"Kitchen"})]}),t&&Object(x.jsx)("button",{onClick:function(){i(m.logout()),o.signOut()},className:"btn logout",children:"logout"}),Object(x.jsxs)(a.d,{children:[Object(x.jsx)(a.b,{path:"/",exact:!0,children:Object(x.jsx)(a.a,{to:"/auth"})}),Object(x.jsx)(a.b,{path:"/auth",children:Object(x.jsx)(p,{})}),Object(x.jsx)(a.b,{path:"/dining-hall",children:Object(x.jsx)(ne,{})}),Object(x.jsx)(a.b,{path:"/kitchen",children:Object(x.jsx)(re,{})}),Object(x.jsx)(a.b,{path:"*",children:Object(x.jsx)(a.a,{to:"/auth"})})]})]})},de=Object(b.a)({reducer:{order:z.reducer,auth:h.reducer}});r.a.render(Object(x.jsx)(s.a,{basename:"/Restaurant-App",children:Object(x.jsx)(l.a,{store:de,children:Object(x.jsx)(se,{})})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.c5819e6e.chunk.js.map